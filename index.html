<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>üéâ Êñ∞Âπ¥Âø´‰πê 2026ÔºÅ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      color: white;
      font-family: "Microsoft YaHei", "PingFang SC", "Hiragino Sans GB", sans-serif;
      overflow: hidden;
      height: 100vh;
      position: relative;
    }

    /* ÁÇπÂáªÂºÄÂßã */
    #click-to-start {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.95);
      z-index: 200;
      font-size: 24px;
      color: gold;
      text-shadow: 0 0 15px rgba(255, 215, 0, 0.9);
      cursor: pointer;
      user-select: none;
    }

    /* ÂÄíËÆ°Êó∂ */
    #countdown {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20vw;
      font-weight: bold;
      color: white;
      text-shadow:
        0 0 10px #ff0000,
        0 0 20px #ff7f00,
        0 0 30px #ffff00;
      z-index: 150;
      opacity: 1;
      animation: countdownBlink 1s infinite alternate;
    }

    @keyframes countdownBlink {
      from { transform: scale(1); opacity: 1; }
      to { transform: scale(1.5); opacity: 0.2; }
    }

    /* Â§ßÂ≠óÁ•ùÁ¶èÔºàÂ§çÁî®Ôºâ */
    #big-message {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: clamp(120px, 25vw, 200px);
      font-weight: bold;
      text-align: center;
      color: white;
      text-shadow:
        0 0 10px #ff0000,
        0 0 20px #ff7f00,
        0 0 30px #ffff00,
        0 0 40px #00ff00;
      z-index: 100;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      display: none;
      padding: 0 20px;
      line-height: 1.1;
    }

    /* Â∫ïÈÉ®Á•ùÁ¶èËØ≠ */
    #wishes {
      position: absolute;
      bottom: 30px;
      left: 0;
      width: 100%;
      text-align: center;
      z-index: 110;
      white-space: nowrap;
      overflow: hidden;
      display: none;
    }
    #wishes-inner {
      display: inline-block;
      padding-left: 100%;
      animation: scrollWishes 45s linear infinite;
      font-size: clamp(22px, 4.5vw, 28px);
      font-weight: bold;
      color: white;
      text-shadow:
        0 0 8px #000,
        0 0 12px #000,
        0 0 16px #ff0000,
        0 0 20px #ff7f00;
    }

    /* È°∂ÈÉ®‰∏â‰ΩçÂÖ¨‰∏ªÁ•ùÁ¶èËØ≠Ôºà‰∏çÂÜç‰ΩøÁî®ÊªöÂä®Ôºâ */
    /* Â∑≤ÁßªÈô§ #top-wishes Áõ∏ÂÖ≥Ê†∑Âºè */

    @keyframes scrollWishes {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 40;
    }

    /* ÂÖ®Â±èÁÖßÁâá */
    .photo-full {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      z-index: 95;
    }
    .photo-full img {
      max-width: 66vw;
      max-height: 66vh;
      object-fit: contain;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
      transition: transform 0.5s ease;
    }

    /* ÂøÉÂΩ¢Â∞èÂõæ */
    .heart-photo {
      position: absolute;
      width: 100px;
      height: 100px;
      display: block;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
      overflow: hidden;
      z-index: 85;
      opacity: 0;
      transition:
        opacity 0.3s,
        transform 1.2s cubic-bezier(0.16, 1, 0.3, 1),
        left 1.2s cubic-bezier(0.16, 1, 0.3, 1),
        top 1.2s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .heart-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <div id="click-to-start">üéµ ÁÇπÂáªÊí≠ÊîæÈü≥‰πêÂπ∂ÂºÄÂßãÊñ∞Âπ¥ÂÄíËÆ°Êó∂ üéÜ</div>
  <div id="countdown">10</div>
  <div id="big-message">2026ÔºåÊñ∞Âπ¥Âø´‰πêÔºÅ</div>
  <div id="wishes"><div id="wishes-inner"></div></div>
  <canvas id="canvas"></canvas>

  <!-- Èü≥È¢ëÂÖÉÁ¥† -->
  <audio id="bgm1" src="1.mp3" preload="auto" muted></audio>
  <audio id="bgm2" src="2.mp3" preload="auto" muted loop></audio>

  <script>
    for (let i = 1; i <= 35; i++) {
      const div = document.createElement('div');
      div.className = 'photo-full';
      div.innerHTML = `<img src="picture_${i}.jpg?t=${Date.now()}" alt="Photo ${i}">`;
      document.body.appendChild(div);
    }
  </script>

  <script>
    let appStarted = false;
    let musicUnlocked = false;

    // ÂÅúÊ≠¢ÊâÄÊúâÈü≥‰πê
    function stopAllMusic() {
      const bgm1 = document.getElementById('bgm1');
      const bgm2 = document.getElementById('bgm2');
      bgm1.pause();
      bgm2.pause();
      bgm1.currentTime = 0;
      bgm2.currentTime = 0;
    }

    // Áî®Êà∑‰∫§‰∫íÂêéËß£ÈîÅÈü≥È¢ë
    function unlockAudio() {
      if (musicUnlocked) return;
      musicUnlocked = true;
      const bgm1 = document.getElementById('bgm1');
      const bgm2 = document.getElementById('bgm2');
      bgm1.muted = false;
      bgm2.muted = false;
      // Â∞ùËØïÊí≠Êîæ‰ª•Ëß£ÈîÅÔºàÂç≥‰ΩøÈùôÈü≥Ôºâ
      bgm1.play().catch(() => {});
      bgm2.play().catch(() => {}).then(() => {
        bgm2.pause();
        bgm2.currentTime = 0;
      });
    }

    // ÂêØÂä®Èü≥‰πêÊµÅÁ®ã
    function startMusicFlow() {
      const bgm1 = document.getElementById('bgm1');
      const bgm2 = document.getElementById('bgm2');

      bgm1.volume = 0.6;
      bgm2.volume = 0.6;

      // Èü≥‰πê1ÁªìÊùü ‚Üí Êí≠ÊîæÈü≥‰πê2ÔºàÂæ™ÁéØÔºâ
      bgm1.addEventListener('ended', () => {
        bgm2.play().catch(e => console.warn('bgm2 play failed:', e));
      });

      bgm1.play().catch(e => console.warn('bgm1 play failed:', e));
    }

    function startApp() {
      if (appStarted) return;
      appStarted = true;
      unlockAudio();
      document.getElementById('click-to-start').style.display = 'none';
      initCanvas();
      startCountdown();
      startMusicFlow();
    }

    document.getElementById('click-to-start').addEventListener('click', startApp);

    window.addEventListener('load', unlockAudio);

    // ========== ÁÉüËä±Á≥ªÁªü ==========
    function createStars(w, h) {
      const stars = [];
      for (let i = 0; i < 200; i++) {
        stars.push({
          x: Math.random() * w,
          y: Math.random() * h,
          size: Math.random() * 2 + 0.5,
          opacity: Math.random() * 0.7 + 0.3
        });
      }
      return stars;
    }

    function drawStars(ctx, stars) {
      ctx.fillStyle = '#fff';
      stars.forEach(s => {
        ctx.globalAlpha = s.opacity;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
        ctx.fill();
      });
      ctx.globalAlpha = 1;
    }

    class Firework {
      constructor(w, h) {
        this.x = Math.random() * w;
        this.y = h;
        this.targetY = Math.random() * h * 0.4;
        this.speed = 4 + Math.random() * 2;
        this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
        this.particles = [];
        this.exploded = false;
        this.life = 200;
      }
      update() {
        if (!this.exploded) {
          this.y -= this.speed;
          if (this.y <= this.targetY) {
            this.exploded = true;
            const count = 30 + Math.floor(Math.random() * 20);
            for (let i = 0; i < count; i++) {
              const angle = Math.random() * Math.PI * 2;
              const speed = 2 + Math.random() * 4;
              const life = 120 + Math.random() * 80;
              const thickness = 0.5 + Math.random() * 1.5;
              this.particles.push({
                x: this.x,
                y: this.y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                life,
                thickness,
                trail: []
              });
            }
          }
        } else {
          this.particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.03;
            p.life--;
            p.trail.push({ x: p.x, y: p.y });
            if (p.trail.length > 5) p.trail.shift();
          });
          this.life--;
        }
      }
      draw(ctx) {
        if (!this.exploded) {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, 4, 0, Math.PI * 2);
          ctx.fill();
        } else {
          this.particles.forEach(p => {
            if (p.life > 0) {
              ctx.globalAlpha = p.life / 200;
              ctx.strokeStyle = this.color;
              ctx.lineWidth = p.thickness;
              ctx.lineCap = 'round';
              ctx.beginPath();
              if (p.trail.length > 1) {
                ctx.moveTo(p.trail[0].x, p.trail[0].y);
                for (let i = 1; i < p.trail.length; i++) {
                  ctx.lineTo(p.trail[i].x, p.trail[i].y);
                }
                ctx.stroke();
              }
            }
          });
          ctx.globalAlpha = 1;
        }
      }
      isFinished() {
        return this.life <= 0 && this.particles.every(p => p.life <= 0);
      }
    }

    let canvas, ctx, w, h, stars, fireworks = [];

    function initCanvas() {
      canvas = document.getElementById('canvas');
      ctx = canvas.getContext('2d');
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      stars = createStars(w, h);

      window.addEventListener('resize', () => {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        stars = createStars(w, h);
      });

      animate();
    }

    function animate() {
      ctx.fillStyle = 'rgba(0,0,0,0.1)';
      ctx.fillRect(0, 0, w, h);
      drawStars(ctx, stars);

      if (fireworks.length < 6 && Math.random() < 0.033) {
        fireworks.push(new Firework(w, h));
      }

      for (let i = fireworks.length - 1; i >= 0; i--) {
        fireworks[i].update();
        fireworks[i].draw(ctx);
        if (fireworks[i].isFinished()) {
          fireworks.splice(i, 1);
        }
      }

      requestAnimationFrame(animate);
    }

    // ========== ÂÄíËÆ°Êó∂ ==========
    function startCountdown() {
      let count = 10;
      const el = document.getElementById('countdown');

      const showNumber = (num) => {
        el.textContent = num;
        if (num > 0) {
          setTimeout(() => showNumber(num - 1), 1000);
        } else {
          setTimeout(() => {
            el.style.opacity = '0';
            setTimeout(() => {
              el.style.display = 'none';
              showBigMessage();
            }, 100);
          }, 1000);
        }
      };

      showNumber(count);
    }

    // ========== ‰∏ªÊ†áÈ¢ò ==========
    function showBigMessage() {
      const msg = document.getElementById('big-message');
      msg.textContent = '2026ÔºåÊñ∞Âπ¥Âø´‰πêÔºÅ';
      msg.style.display = 'flex';
      setTimeout(() => {
        msg.style.opacity = '1';
        setTimeout(() => {
          msg.style.opacity = '0';
          setTimeout(() => {
            msg.style.display = 'none';
            showPrincessWishes(); // üëà Êñ∞Â¢ûÔºöÊòæÁ§∫‰∏â‰ΩçÂÖ¨‰∏ªÁ•ùÁ¶è
          }, 1000);
        }, 2000);
      }, 100);
    }

    // ========== ‰∏â‰ΩçÂÖ¨‰∏ªÁ•ùÁ¶èËØ≠ÔºàÂÖ®Â±èÈÄêÂè•Ôºâ ==========
    function showPrincessWishes() {
      const wishes = [
        "Á•ùÊàë‰ª¨Âπ¥Âπ¥ÈÉΩÂ•ΩÔºåÂ•ΩÂú®Âπ¥Âπ¥‚Äî‚ÄîËä≥ÂÖ¨‰∏ª",
        "Á•ùÂÖ¨‰∏ª‰ª¨‰ªäÂπ¥ÊòéÂπ¥ÈÉΩÂºÄÂøÉÂø´‰πêÂπ∏Á¶è‚Äî‚ÄîÂ®úÂÖ¨‰∏ª",
        "‰ªäÂπ¥ÊòéÂπ¥Âπ¥Âπ¥Êàë‰ª¨ÈÉΩË¶ÅÂπ∏Á¶èÂì¶‚Äî‚ÄîÊÖßÂÖ¨‰∏ª"
      ];
      const msg = document.getElementById('big-message');
      let index = 0;

      const showNext = () => {
        if (index >= wishes.length) {
          // ÂÖ®ÈÉ®ÊòæÁ§∫ÂÆåÊØï ‚Üí ËøõÂÖ•ÁÖßÁâáÊµÅÁ®ã
          startWishesAndPhotos();
          return;
        }

        msg.textContent = wishes[index];
        msg.style.display = 'flex';
        setTimeout(() => {
          msg.style.opacity = '1';
          setTimeout(() => {
            msg.style.opacity = '0';
            setTimeout(() => {
              msg.style.display = 'none';
              index++;
              setTimeout(showNext, 300); // Áü≠ÊöÇÈó¥Èöî
            }, 1000);
          }, 2000); // ÊØèÂè•ÊòæÁ§∫2Áßí
        }, 100);
      };

      showNext();
    }

    // ========== Á•ùÁ¶èËØ≠ÊªöÂä® + ÁÖßÁâáÊµÅÁ®ã ==========
    function startWishesAndPhotos() {
      const bottomWishes = [
        "üéâ Happy New Year!",
        "Êñ∞Âπ¥Âø´‰πêÔºå‰∏á‰∫ãÂ¶ÇÊÑèÔºÅ",
        "Ë∫´‰ΩìÂÅ•Â∫∑ÔºåÂ∑•‰ΩúÈ°∫Âà©ÔºÅ",
        "Ë¥¢Ê∫êÂπøËøõÔºå‰∫ã‰∏öÊúâÊàêÔºÅ",
        "Âπ∏Á¶èÁæéÊª°ÔºåÁ¨ëÂè£Â∏∏ÂºÄÔºÅ",
        "ÂøÉÊÉ≥‰∫ãÊàêÔºåÊ¢¶ÊÉ≥ÊàêÁúüÔºÅ",
        "Âπ≥ÂÆâÂñú‰πêÔºåÂ•ΩËøêËøûËøûÔºÅ",
        "ÁîüÊ¥ªÂÖÖÊª°Èò≥ÂÖâÔºÅ",
        "Â•ΩËøê+1", "Âπ∏Á¶è+1", "ÂÅ•Â∫∑+1", "Âø´‰πê+1", "Ë¥¢ÂØå++",
        "Êñ∞Âπ¥Êñ∞Ê∞îË±°ÔºåÂ•ΩËøêÊå°‰∏ç‰ΩèÔºÅ",
        "Ê≠§ÂàªÔºåÊù•Âπ¥ÔºåÈÉΩÂπ∏Á¶è",
        "Êñ∞Âπ¥Âø´‰πêÔºåÈòñÂÆ∂Ê¨¢‰πêÔºÅ",
        "Ê≠•Ê≠•È´òÂçáÔºåÂâçÁ®ã‰ººÈî¶ÔºÅ",
        "Êñ∞Âπ¥Âø´‰πêÔºåÁ¶èÊòüÈ´òÁÖßÔºÅ",
        "ÊØè‰∏ÄÂ§©ÈÉΩÂÖÖÊª°Ê¨¢Â£∞Á¨ëËØ≠ÔºÅ"
      ];

      document.getElementById('wishes-inner').textContent = bottomWishes.join('„ÄÄ„ÄÄ');
      document.getElementById('wishes').style.display = 'block';

      const fullPhotos = Array.from(document.querySelectorAll('.photo-full'));
      const heartDivs = [];

      fullPhotos.forEach(container => {
        const div = document.createElement('div');
        div.className = 'heart-photo';
        const img = container.querySelector('img').cloneNode(true);
        div.appendChild(img);
        document.body.appendChild(div);
        heartDivs.push(div);
      });

      let index = 0;
      const total = fullPhotos.length;

      const showNextPhoto = () => {
        if (index >= total) {
          // ‚úÖ Áà±ÂøÉÊãºÂÖ® ‚Üí ÂÅúÊ≠¢ÊâÄÊúâÈü≥‰πê
          heartDivs.forEach(div => div.style.opacity = '1');
          stopAllMusic();
          return;
        }

        const full = fullPhotos[index];
        const small = heartDivs[index];

        full.style.display = 'flex';

        setTimeout(() => {
          full.style.display = 'none';

          const t = (index / (total - 1)) * Math.PI * 2;
          const x = 16 * Math.pow(Math.sin(t), 3);
          const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));

          const cx = window.innerWidth / 2;
          const cy = window.innerHeight * 0.55;
          const scale = Math.min(window.innerWidth, window.innerHeight) * 0.018;

          small.style.left = (cx + x * scale - 50) + 'px';
          small.style.top = (cy + y * scale - 50) + 'px';
          small.style.opacity = '0';

          setTimeout(() => {
            small.style.opacity = '1';
            index++;
            if (index < total) {
              setTimeout(showNextPhoto, 300); // ‚úÖ 300ms ÂàáÊç¢
            }
          }, 100);
        }, 1000);
      };

      if (total > 0) {
        showNextPhoto();
      }
    }
  </script>
</body>
</html>
